!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs")):"function"==typeof define&&define.amd?define("@thinkam.net/ng-cast",["exports","@angular/core","@angular/common","rxjs"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).thinkam=e.thinkam||{},e.thinkam.net=e.thinkam.net||{},e.thinkam.net["ng-cast"]={}),e.ng.core,e.ng.common,e.rxjs)}(this,(function(e,t,i,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function a(e,t,i,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var d=e.length-1;d>=0;d--)(a=e[d])&&(r=(o<3?a(r):o>3?a(t,i,r):a(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r}e.ɵa=function(){function e(e){this.ngCastService=e,this.videoImage="",this.imageOffline=!1,this.srcImageOffline=""}return e.prototype.ngOnInit=function(){this.window=window;var e=this.ngCastService;this.window.__onGCastApiAvailable=function(t){t&&e.initializeCastApi()},this.castingStatus=this.ngCastService.getStatus()},e.prototype.openSession=function(){this.ngCastService.discoverDevices()},e.prototype.closeSession=function(){this.ngCastService.discoverDevices()},e}(),a([t.Input()],e.ɵa.prototype,"videoImage",void 0),a([t.Input()],e.ɵa.prototype,"imageOffline",void 0),a([t.Input()],e.ɵa.prototype,"srcImageOffline",void 0),e.ɵa=a([t.Component({selector:"ng-cast",template:'<div *ngIf="!imageOffline" id="main_video">\n  <div class="imageSub"> \x3c!-- Put Your Image Width --\x3e\n     <div class="blackbg" id="playerstatebg">IDLE</div>\n     <div class=label id="playerstate">IDLE</div>\n     <img [src]="videoImage" id="video_image">\n     <div id="video_image_overlay"></div>\n     <video id="video_element">\n     </video>\n  </div>\n\n  <div id="media_control">\n     <div id="play"></div>\n     <div id="pause"></div>\n     <div id="progress_bg"></div>\n     <div id="progress"></div>\n     <div id="progress_indicator"></div>\n     <div id="fullscreen_expand"></div>\n     <div id="fullscreen_collapse"></div>\n     <google-cast-launcher id="castbutton"></google-cast-launcher>\n     <div id="audio_bg"></div>\n     <div id="audio_bg_track"></div>\n     <div id="audio_indicator"></div>\n     <div id="audio_bg_level"></div>\n     <div id="audio_on"></div>\n     <div id="audio_off"></div>\n     <div id="duration">00:00:00</div>\n  </div>\n</div>\n<div *ngIf="!imageOffline" id="media_info">\n  <div id="media_title">\n  </div>\n  <div id="media_subtitle">\n  </div>\n  <div id="media_desc">\n  </div>\n</div>\n\n<div *ngIf="!imageOffline" id="carousel">\n</div>\n\n<img \n  width="100%" \n  *ngIf="imageOffline" \n  [src]="srcImageOffline"\n  alt="TV Offline"\n/>\n',styles:['body{background-color:#f2f2f2;font-family:Roboto,OpenSans,Verdana,Georgia,Serif}#msg{-webkit-transition:opacity 0 2s;color:#fff;display:none;font-size:90%;font-weight:400;margin-left:200px;transition:opacity 0 2s}#top_header_bar{background-image:url(/assets/imagefiles/header_bg-top.png);background-repeat:repeat-x;height:10px;margin:0;width:100%}#top_header{background-image:url(/assets/imagefiles/header_bg.png);height:71px;z-index:1000}#footer,#top_header{background-repeat:repeat-x;float:left;margin:0;width:100%}#footer{background-image:url(/assets/imagefiles/footer_bg.png);height:81px}#copyright{width:300px}#copyright,#footer_content{color:#fff;float:left;font-size:13px;margin:10px}#footer_content{width:400px}#footer_content_link{color:#fff}#footer_language{color:#fff;float:right;font-size:13px;margin:10px;width:200px}#logo{background-image:url(/assets/imagefiles/logo.png);float:left;height:71px;margin:10px 25px 0;width:201px}.header_tab{-moz-transition:all .6s ease-in-out;-o-transition:all .6s ease-in-out;-webkit-transition:all .6s ease-in-out;float:left;font-family:Roboto,OpenSans;font-size:20px;font-weight:700;height:31px;margin-top:10px;padding:20px}#title_text{text-align:center;width:100%}#main_video{float:left;width:1100px}#video_image{height:536px;margin:20px auto 0 40px;width:960px}#video_image_overlay{background:linear-gradient(0deg,rgba(0,0,0,.9),transparent 72%,transparent);margin:0 0 0 40px;position:absolute;z-index:0}#video_element,#video_image_overlay{display:none;height:540px;width:960px}#video_element{background-color:#000;margin:20px auto 0 40px}#media_info{background-color:#dde0e5;clear:both;color:#000;display:block;float:left;height:116px;margin:-4px 0 0 40px;opacity:.9;padding:10px;width:940px}#media_title{font-size:30px;font-weight:700;margin:0 10px 0 0}#media_subtitle,#media_title{float:left;font-family:Roboto,Open Sans,Verdana,Georgia,Serif;padding:0}#media_subtitle{font-size:18px;margin:13px 0 0 30px}#media_desc{float:left;font-size:12px;margin:5px;width:95%}#media_control,#media_desc{font-family:Roboto,Open Sans,Verdana,Georgia,Serif}#media_control{-webkit-transition:opacity 1s;background-color:#000;height:60px;left:8px;margin:-60px 0 0 40px;opacity:.7;padding:0;position:absolute;top:650px;transition:opacity 1s;width:960px;z-index:1000}#media_control:hover{opacity:.7}#play{background-image:url(/assets/imagefiles/play.png);float:left;height:40px;margin:10px 20px 10px 10px;width:65px}#play:hover{background-image:url(/assets/imagefiles/play-hover.png)}#play:press{background-image:url(/assets/imagefiles/play-press.png)}#pause{background-image:url(/assets/imagefiles/pause.png);display:none;float:left;height:40px;margin:10px 20px 10px 10px;width:65px}#pause:hover{background-image:url(/assets/imagefiles/pause-hover.png)}.button{font-family:Roboto,Open Sans,Verdana,Georgia,Serif;font-size:100%;margin:5px}.volume{margin-left:8px;width:60px}#muteText{margin-left:3px;width:30px}.muteButton{font-family:Roboto,Open Sans,Verdana,Georgia,Serif;font-size:110%}.imageIcon{padding:3px 0 0;width:25px}#progress{background-image:url(/assets/imagefiles/timeline_bg_progress.png);width:1px;z-index:10}#progress,#progress_indicator{background-repeat:repeat-x;cursor:pointer;float:left;height:36px;margin:20px 0 10px -620px}#progress_indicator{background-image:url(/assets/imagefiles/timeline_indicator.png);width:6px;z-index:1000}#progress_bg{background-image:url(/assets/imagefiles/timeline_bg_track.png);background-repeat:repeat-x;cursor:pointer;float:left;height:36px;margin:20px 20px 10px 0;width:600px}#castbutton{background-color:#000;border:none;float:right;height:32px;margin:10px 6px 14px 0;opacity:.7;outline:none;width:40px}#castbutton:hover{--connected-color:#fff;--disconnected-color:#fff}#audio_off{background-image:url(/assets/imagefiles/audio_off.png);display:none}#audio_off,#audio_on{float:right;height:32px;margin:10px 4px 10px 0;width:32px}#audio_on{background-image:url(/assets/imagefiles/audio_on.png);display:block}#audio_bg{background-image:url(/assets/imagefiles/audio_bg.png);height:124px;margin:-115px 8px -10px 0;opacity:.1;width:41px;z-index:10}#audio_bg,#audio_bg_track{display:block;float:right;position:relative}#audio_bg_track{background-image:url(/assets/imagefiles/audio_bg_track.png);height:100px;margin:-100px 20px -30px 0;opacity:0;width:16px;z-index:1000}#audio_indicator{background-image:url(/assets/imagefiles/audio_indicator.png);display:none;height:5px}#audio_bg_level,#audio_indicator{float:right;margin:-50px 20px -30px 0;opacity:0;position:relative;width:16px;z-index:1000}#audio_bg_level{background-image:url(/assets/imagefiles/audio_bg_level.png);display:block;height:50px}#fullscreen_expand{background-image:url(/assets/imagefiles/fullscreen_expand.png);display:block}#fullscreen_collapse,#fullscreen_expand{cursor:pointer;float:right;height:32px;margin:10px 20px 10px 0;width:32px}#fullscreen_collapse{background-image:url(/assets/imagefiles/fullscreen_collapse.png);display:none}#duration{color:#fff;display:block;float:right;height:32px;margin:18px 15px 10px;width:60px}div.imageSub{position:relative}div.imageSub img{z-index:1}div.imageSub div{bottom:0;left:0;padding:0;position:absolute;right:0}div.imageSub div.blackbg{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";background-color:#000;color:#000;filter:alpha(opacity=50);opacity:.5;z-index:2000}div.imageSub div.blackbg,div.imageSub div.label{bottom:60px;display:none;font-size:120%;height:30px;left:300px;padding:10px;width:400px}div.imageSub div.label{color:#fff;z-index:3000}#carousel{margin:20px 10px 10px 40px;width:990px}.thumb{cursor:pointer;float:left;margin:10px 10px 10px 0}.thumbnail{height:127px;margin-right:10px;width:225px}.vertical{-webkit-transform:rotate(90deg)}']})],e.ɵa),e.NgCastService=function(){function e(){var e=this;this.window=window,this.status={casting:!1},this.onInitSuccess=function(){console.log("GCast initialization success")},this.onError=function(e){console.log("GCast initialization failed",e)},this.discoverDevices=function(){var t=e,i=new n.Subject;return e.cast.requestSession((function(e){t.session=e,t.setCasting(!0),i.next("CONNECTED")}),(function(e){t.setCasting(!1),"cancel"===e.code?(t.session=void 0,i.next("CANCEL")):console.error("Error selecting a cast device",e)})),i},this.onMediaDiscovered=function(e){var t=window.document.createElement("script");return t.setAttribute("type","text/javascript"),t.setAttribute("src","https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"),window.document.body.appendChild(t),globalThis.CastPlayer.mediaJSON.categories=e,globalThis.CastPlayer.addMediaContents()},this.play=function(){e.currentMedia.play(null)},this.pause=function(){e.currentMedia.pause(null)},this.stop=function(){e.currentMedia.stop(null)},this.onMediaError=function(e){console.error("Error launching media",e)},globalThis.CastPlayer.mediaJSON={categories:[]}}return e.prototype.initializeCastApi=function(){var e=this;this.cast=this.window.chrome.cast;var t=new this.cast.SessionRequest("4F8B3483"),i=new this.cast.ApiConfig(t,(function(){}),(function(t){e.cast.ReceiverAvailability.AVAILABLE}));this.cast.initialize(i,this.onInitSuccess,this.onError)},e.prototype.initialize=function(e){e&&(globalThis.CastPlayer.initializeUI(),globalThis.CastPlayer.setupLocalPlayer())},e.prototype.setCasting=function(e){this.status.casting=e},e.prototype.getStatus=function(){return this.status},e}(),e.NgCastService=a([t.Injectable()],e.NgCastService),e.NgCastModule=function(){},e.NgCastModule=a([t.NgModule({schemas:[t.CUSTOM_ELEMENTS_SCHEMA],imports:[i.CommonModule],exports:[e.ɵa],providers:[e.NgCastService],declarations:[e.ɵa]})],e.NgCastModule);var o=600,r=100,d="IDLE",l="BUFFERING",s="LOADED",c="PLAYING",u="PAUSED",m="ERROR",p=function(){this.playerHandler=new g(this),this.playerState=d,this.playerStateBeforeSwitch=null,this.remotePlayer=null,this.remotePlayerController=null,this.currentMediaTime=0,this.mediaDuration=-1,this.timer=null,this.incrementMediaTimeHandler=this.incrementMediaTime.bind(this),this.seekMediaListener=this.seekMedia.bind(this),this.currentMediaIndex=0,this.mediaContents=null,this.fullscreen=!1,this.mediaInfo=null,this.whenSkippable=null,this.liveSeekableRange=null,this.isLiveContent=!1,this.mediaJSON={categories:[]}};p.prototype.initializeCastPlayer=function(){var e={receiverApplicationId:"4F8B3483"};e.autoJoinPolicy=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,cast.framework.CastContext.getInstance().setOptions(e),y.remotePlayer=new cast.framework.RemotePlayer,y.remotePlayerController=new cast.framework.RemotePlayerController(y.remotePlayer),y.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,y.switchPlayer.bind(y))},p.prototype.switchPlayer=function(){y.stopProgressTimer(),y.resetVolumeSlider(),y.playerHandler.stop(),y.playerState=d,cast&&cast.framework&&y.remotePlayer.isConnected?y.setupRemotePlayer():y.setupLocalPlayer()};var g=function(e){this.target={},this.setTarget=function(e){this.target=e},this.play=function(){e.playerState!=d&&this.target.isMediaLoaded(e.currentMediaIndex)?(e.playerState=c,this.target.play(),document.getElementById("play").style.display="none",document.getElementById("pause").style.display="block"):this.load(e.currentMediaIndex)},this.pause=function(){this.target.pause(),e.playerState=u,document.getElementById("play").style.display="block",document.getElementById("pause").style.display="none"},this.stop=function(){e.playerState=d,this.target.stop()},this.load=function(t){void 0===t&&(t=null),t||(t=e.currentMediaIndex),e.playerState=l,this.target.load(t)},this.isMediaLoaded=function(e){return this.target.isMediaLoaded(e)},this.prepareToPlay=function(){e.mediaDuration=this.getMediaDuration(),e.playerHandler.updateDurationDisplay(),e.playerState=s,this.play(),e.startProgressTimer(),this.updateDisplay()},this.getCurrentMediaTime=function(){return this.target.getCurrentMediaTime()},this.getMediaDuration=function(){return this.target.getMediaDuration()},this.updateDisplay=function(){this.currentMediaTime=this.target.getCurrentMediaTime(),this.mediaDuration=this.target.getMediaDuration(),this.target.updateDisplay()},this.updateCurrentTimeDisplay=function(){this.target.updateCurrentTimeDisplay()},this.setTimeString=function(e,t){this.target.setTimeString(e,t)},this.setVolume=function(e){this.target.setVolume(e)},this.mute=function(){this.target.mute(),document.getElementById("audio_on").style.display="none",document.getElementById("audio_off").style.display="block"},this.unMute=function(){this.target.unMute(),document.getElementById("audio_on").style.display="block",document.getElementById("audio_off").style.display="none"},this.isMuted=function(){return this.target.isMuted()},this.seekTo=function(e){this.target.seekTo(e)}};p.prototype.setupLocalPlayer=function(){var e=document.getElementById("video_element");e.addEventListener("loadeddata",y.onMediaLoadedLocally.bind(y));var t={play:function(){e.play(),document.getElementById("video_image").style.display="none",e.style.display="block"},pause:function(){e.pause()},stop:function(){e.stop()}};t.load=function(t){e.src=y.mediaContents[t].sources[0],e.load()}.bind(y),t.getCurrentMediaTime=function(){return e.currentTime},t.getMediaDuration=function(){return e.duration},t.updateDisplayMessage=function(){document.getElementById("playerstate").style.display="none",document.getElementById("playerstatebg").style.display="none",document.getElementById("video_image_overlay").style.display="none"},t.setVolume=function(t){e.volume=t<r?t/r:1;var i=document.getElementById("audio_bg_level");i.style.height=t+"px",i.style.marginTop=-t+"px"},t.mute=function(){e.muted=!0},t.unMute=function(){e.muted=!1},t.isMuted=function(){return e.muted},t.seekTo=function(t){e.currentTime=t},y.playerHandler.setTarget(t),y.playerHandler.setVolume(50),y.showFullscreenButton(),y.currentMediaTime>0&&y.playerHandler.play()},p.prototype.setupRemotePlayer=function(){y.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.MEDIA_INFO_CHANGED,function(e){var t=cast.framework.CastContext.getInstance().getCurrentSession();if(!t)return y.mediaInfo=null,y.isLiveContent=!1,void y.playerHandler.updateDisplay();var i=t.getMediaSession();if(!i)return y.mediaInfo=null,y.isLiveContent=!1,void y.playerHandler.updateDisplay();y.mediaInfo=i.media,y.mediaInfo?y.isLiveContent=y.mediaInfo.streamType==chrome.cast.media.StreamType.LIVE:y.isLiveContent=!1,i.playerState==c&&y.playerState!==c&&y.playerHandler.prepareToPlay(),y.removeAdMarkers(),y.updateAdMarkers(),y.playerHandler.updateDisplay()}.bind(y)),y.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.CAN_SEEK_CHANGED,function(e){y.enableProgressBar(e.value)}.bind(y)),y.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,function(){y.remotePlayer.isPaused?y.playerHandler.pause():y.playerState!==c&&y.playerHandler.play()}.bind(y)),y.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,function(){y.remotePlayer.isMuted?y.playerHandler.mute():y.playerHandler.unMute()}.bind(y)),y.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,function(){var e=y.remotePlayer.volumeLevel*r,t=document.getElementById("audio_bg_level");t.style.height=e+"px",t.style.marginTop=-e+"px"}.bind(y)),y.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_PLAYING_BREAK_CHANGED,function(e){y.isPlayingBreak(e.value)}.bind(y)),y.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.WHEN_SKIPPABLE_CHANGED,function(e){y.onWhenSkippableChanged(e.value)}.bind(y)),y.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_BREAK_CLIP_TIME_CHANGED,function(e){y.onCurrentBreakClipTimeChanged(e.value)}.bind(y)),y.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.BREAK_CLIP_ID_CHANGED,function(e){y.onBreakClipIdChanged(e.value)}.bind(y)),y.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.LIVE_SEEKABLE_RANGE_CHANGED,function(e){console.log("LIVE_SEEKABLE_RANGE_CHANGED"),y.liveSeekableRange=e.value}.bind(y));var e={};e.play=function(){y.remotePlayer.isPaused&&y.remotePlayerController.playOrPause(),document.getElementById("video_image").style.display="",document.getElementById("video_element").style.display="none"}.bind(y),e.pause=function(){y.remotePlayer.isPaused||y.remotePlayerController.playOrPause()}.bind(y),e.stop=function(){y.remotePlayerController.stop()}.bind(y),e.load=function(e){console.log("Loading..."+this.mediaContents[e].title);var t=new chrome.cast.media.MediaInfo(this.mediaContents[e].sources[0],"video/mp4");t.metadata=new chrome.cast.media.GenericMediaMetadata,t.metadata.metadataType=chrome.cast.media.MetadataType.GENERIC,t.metadata.title=this.mediaContents[e].title,t.metadata.images=[{url:""+this.mediaContents[e].thumb}];var i=new chrome.cast.media.LoadRequest(t);castSession.loadMedia(i).then(this.playerHandler.loaded.bind(this.playerHandler),function(e){this.playerState=m,console.log("Remote media load error: "+p.getErrorMessage(e))}.bind(y))}.bind(y),e.isMediaLoaded=function(e){var t=cast.framework.CastContext.getInstance().getCurrentSession();if(!t)return!1;var i=t.getMediaSession();return!!i&&i.playerState!=d}.bind(y),e.getCurrentMediaTime=function(){return y.isLiveContent&&y.mediaInfo.metadata&&y.mediaInfo.metadata.sectionStartTimeInMedia?y.remotePlayer.currentTime-y.mediaInfo.metadata.sectionStartTimeInMedia:y.remotePlayer.currentTime}.bind(y),e.getMediaDuration=function(){return y.isLiveContent?null==y.mediaInfo.metadata||null==y.mediaInfo.metadata.sectionDuration||null==y.mediaInfo.metadata.sectionStartTimeInMedia?null:y.mediaInfo.metadata.sectionDuration:y.remotePlayer.duration}.bind(y),e.updateDisplay=function(){var e=cast.framework.CastContext.getInstance().getCurrentSession();if(e&&e.getMediaSession()&&e.getMediaSession().media){var t=e.getMediaSession(),i=t.media,n=document.getElementById("video_image");i.metadata&&i.metadata.images&&i.metadata.images.length>0&&(n.src=i.metadata.images[0].url),document.getElementById("playerstate").style.display="block",document.getElementById("playerstatebg").style.display="block",document.getElementById("video_image_overlay").style.display="block";var a="",o="",r="";if(i.metadata&&(a=i.metadata.title,a=(a=(o=i.metadata.episodeTitle)?a+": "+o:a)?a+" ":"",r=(r=i.metadata.subtitle)?r+" ":""),DEMO_MODE?(document.getElementById("playerstate").innerHTML=(ENABLE_LIVE?"Live Content ":"Sample Video ")+t.playerState+" on Chromecast",document.getElementById("media_title").innerHTML=ENABLE_LIVE?"Live Content":"Sample Video",document.getElementById("media_subtitle").innerHTML=""):(document.getElementById("playerstate").innerHTML=a+t.playerState+" on "+e.getCastDevice().friendlyName,document.getElementById("media_title").innerHTML=a,document.getElementById("media_subtitle").innerHTML=r),i.streamType==chrome.cast.media.StreamType.LIVE){y.liveSeekableRange=t.liveSeekableRange;var d=document.getElementById("live_indicator");d.style.display="block",y.liveSeekableRange&&Math.abs(t.getEstimatedTime()-y.liveSeekableRange.end)<LIVE_INDICATOR_BUFFER?d.src="imagefiles/live_indicator_active.png":d.src="imagefiles/live_indicator_inactive.png"}else document.getElementById("live_indicator").style.display="none"}else document.getElementById("playerstate").style.display="none",document.getElementById("playerstatebg").style.display="none",document.getElementById("video_image_overlay").style.display="none",document.getElementById("media_title").innerHTML="",document.getElementById("media_subtitle").innerHTML=""}.bind(y),e.updateCurrentTimeDisplay=function(){y.playerHandler.setTimeString(document.getElementById("currentTime"),y.playerHandler.getCurrentMediaTime())}.bind(y),e.setTimeString=function(e,t){var i=y.getMediaTimeString(t);if(y.isLiveContent){if(null==i)return void(e.style.display="none");y.mediaInfo.metadata&&void 0!==y.mediaInfo.metadata.sectionStartAbsoluteTime?(e.style.display="flex",e.innerHTML=y.getClockTimeString(t+y.mediaInfo.metadata.sectionStartAbsoluteTime)):(e.style.display="flex",e.innerHTML=i)}else null!==i?(e.style.display="flex",e.innerHTML=i):e.style.display="none"}.bind(y),e.setVolume=function(e){var t=y.remotePlayer.volumeLevel,i=document.getElementById("audio_bg_level");e<r?(i.style.height=e+"px",i.style.marginTop=-e+"px",t=e/r):t=1,y.remotePlayer.volumeLevel=t,y.remotePlayerController.setVolumeLevel()}.bind(y),e.mute=function(){y.remotePlayer.isMuted||y.remotePlayerController.muteOrUnmute()}.bind(y),e.unMute=function(){y.remotePlayer.isMuted&&y.remotePlayerController.muteOrUnmute()}.bind(y),e.isMuted=function(){return y.remotePlayer.isMuted}.bind(y),e.seekTo=function(e){y.remotePlayer.currentTime=e,y.remotePlayerController.seek()}.bind(y),y.playerHandler.setTarget(e),y.remotePlayer.isMuted&&y.playerHandler.mute(),y.enableProgressBar(y.remotePlayer.canSeek);var t=y.remotePlayer.volumeLevel*r,i=document.getElementById("audio_bg_level");i.style.height=t+"px",i.style.marginTop=-t+"px",document.getElementById("media_control").style.opacity=.7,y.hideFullscreenButton(),cast.framework.CastContext.getInstance().getCurrentSession().getSessionState()==cast.framework.SessionState.SESSION_RESUMED?(console.log("Resuming session"),y.playerHandler.prepareToPlay(),y.removeAdMarkers(),y.updateAdMarkers()):y.playerHandler.load()},p.prototype.onMediaLoadedLocally=function(){document.getElementById("video_element").currentTime=y.currentMediaTime,y.playerHandler.prepareToPlay()},p.prototype.selectMedia=function(e){console.log("Media index selected: "+e),y.currentMediaIndex=e,y.playerHandler.currentMediaInfo=void 0,document.getElementById("video_image").src=""+y.mediaContents[e].thumb,document.getElementById("progress_indicator").style.marginLeft="0px",document.getElementById("progress").style.width="0px";var t=document.getElementById("seekable_window"),i=document.getElementById("unseekable_overlay");t.style.width=o,i.style.width="0px",y.stopProgressTimer(),y.currentMediaTime=0,y.playerHandler.setTimeString(document.getElementById("currentTime"),0),y.playerHandler.setTimeString(document.getElementById("duration"),0),y.playerState=d,y.playerHandler.play()},p.prototype.seekMedia=function(e){if(null==y.mediaDuration||cast.framework.CastContext.getInstance().getCurrentSession()&&!y.remotePlayer.canSeek)console.log("Error - Not seekable");else if(!y.isLiveContent||y.liveSeekableRange){var t=parseInt(e.offsetX,10),i=document.getElementById("progress_indicator"),n=document.getElementById("progress"),a=0,r=0,d=0;"progress_indicator"==e.currentTarget.id?(a=parseInt(y.currentMediaTime+y.mediaDuration*t/o,10),r=parseInt(i.style.marginLeft,10)+t,d=parseInt(n.style.width,10)+t):(a=parseInt(t*y.mediaDuration/o,10),r=t,d=t),y.playerState!==c&&y.playerState!==u||(y.currentMediaTime=a,n.style.width=d+"px",i.style.marginLeft=r+"px"),y.isLiveContent&&(a+=y.mediaInfo.metadata.sectionStartTimeInMedia),y.playerHandler.seekTo(a)}else console.log("Live content has no seekable range.")},p.prototype.setVolume=function(e){var t=document.getElementById("audio_bg_level"),i=0;i="audio_bg_track"===e.currentTarget.id?r-parseInt(e.offsetY,10):parseInt(t.clientHeight,10)-parseInt(e.offsetY,10),y.playerHandler.setVolume(i)},p.prototype.startProgressTimer=function(){y.stopProgressTimer(),y.timer=setInterval(y.incrementMediaTimeHandler,1e3)},p.prototype.stopProgressTimer=function(){y.timer&&(clearInterval(y.timer),y.timer=null)},p.prototype.incrementMediaTime=function(){y.currentMediaTime=y.playerHandler.getCurrentMediaTime(),y.mediaDuration=y.playerHandler.getMediaDuration(),y.playerHandler.updateDurationDisplay(),null==y.mediaDuration||y.currentMediaTime<y.mediaDuration||y.isLiveContent?(y.playerHandler.updateCurrentTimeDisplay(),y.updateProgressBarByTimer()):y.mediaDuration>0&&y.endPlayback()},p.prototype.updateProgressBarByTimer=function(){var e=document.getElementById("progress"),t=document.getElementById("progress_indicator");if(null!=y.mediaDuration){t.style.display="",isNaN(parseInt(e.style.width,10))&&(e.style.width="0px");var i=Math.floor(o*y.currentMediaTime/y.mediaDuration);i>o?i=o:i<0&&(i=0),e.style.width=i+"px",t.style.marginLeft=i+"px";var n=document.getElementById("seekable_window"),a=document.getElementById("unseekable_overlay");if(y.isLiveContent)if(y.liveSeekableRange){var r=Math.max(y.mediaInfo.metadata.sectionStartTimeInMedia,y.liveSeekableRange.end)-y.mediaInfo.metadata.sectionStartTimeInMedia,d=Math.floor(o*r/y.mediaDuration);d>o?d=o:d<0&&(d=0),n.style.width=d+"px";var l=Math.max(y.mediaInfo.metadata.sectionStartTimeInMedia,y.liveSeekableRange.start)-y.mediaInfo.metadata.sectionStartTimeInMedia,s=Math.floor(o*l/y.mediaDuration);s>o?s=o:s<0&&(s=0),a.style.width=s+"px"}else n.style.width="0px",a.style.width="600px";else n.style.width="600px",a.style.width="0px";i>=o&&!y.isLiveContent&&y.endPlayback()}else{y.isLiveContent||console.log("Error - Duration is not defined for a VOD stream."),e.style.width="0px";var c=document.getElementById("skip");c&&c.style&&c.style.display&&(c.style.display="none"),t.style.display="none";var u=document.getElementById("seekable_window");u&&u.style&&u.style.width&&(u.style.width="0px");var m=document.getElementById("unseekable_overlay");m&&m.style&&m.style.width&&(m.style.width="0px")}},p.prototype.endPlayback=function(){y.currentMediaTime=0,y.stopProgressTimer(),y.playerState=d,y.playerHandler.updateDisplay();var e=document.getElementById("play");e&&e.style&&e.display&&(e.style.display="block");var t=document.getElementById("pause");t&&t.style&&t.style.display&&(t.style.display="none")},p.prototype.getMediaTimeString=function(e){if(null==e||null==e)return null;var t=!1;e<0&&(t=!0,e*=-1);var i=Math.floor(e/3600),n=Math.floor((e-3600*i)/60),a=Math.floor(e-3600*i-60*n);return i<10&&(i="0"+i),n<10&&(n="0"+n),a<10&&(a="0"+a),(t?"-":"")+i+":"+n+":"+a},p.prototype.getClockTimeString=function(e){if(!e)return"0:00:00";var t=new Date(1e3*e),i=t.getHours(),n=t.getMinutes(),a=t.getSeconds(),o=i>=12?"PM":"AM";return(i=(i%=12)||12)+":"+(n=("0"+n).slice(-2))+":"+(a=("0"+a).slice(-2))+" "+o},p.prototype.updateAdMarkers=function(){var e=cast.framework.CastContext.getInstance().getCurrentSession();if(e){var t=e.getMediaSession();if(t){var i=t.media;if(i){var n=i.breaks,a=i.duration;if(n)for(var o=0;o<n.length;o++){var r=n[o];if(!(r.position>a&&r.isEmbedded))if(!document.getElementById("ad"+r.position))document.getElementById("progress").innerHTML+='<div class="adMarker" id="ad'+r.position+'" style="margin-left: '+y.adPositionToMargin(r.position,a)+'px"></div>'}}}}},p.prototype.removeAdMarkers=function(){document.querySelectorAll(".adMarker").forEach((function(e){e.remove()}))},p.prototype.adPositionToMargin=function(e,t){return-1==e||e>t?o:o*e/t},p.prototype.onBreakClipIdChanged=function(){var e=document.getElementById("skip");e&&e.style&&e.style.display&&(e.style.display="none")},p.prototype.isPlayingBreak=function(e){y.enableProgressBar(!e)},p.prototype.onWhenSkippableChanged=function(e){y.whenSkippable=e},p.prototype.onCurrentBreakClipTimeChanged=function(e){var t=document.getElementById("skip");null==y.whenSkippable||y.whenSkippable<0?t&&t.style&&t.style.display&&(t.style.display="none"):void 0!==y.whenSkippable||e>=y.whenSkippable?t&&t.style&&t.style.display&&(t.style.display="block"):t&&t.style&&t.style.display&&(t.style.display="none")},p.prototype.skipAd=function(){y.remotePlayerController.skipAd()},p.prototype.enableProgressBar=function(e){var t=document.getElementById("progress"),i=document.getElementById("progress_indicator"),n=document.getElementById("seekable_window");e?(t.style.backgroundImage="url('./assets/imagefiles/timeline_bg_progress.png')",t.style.cursor="pointer",n.style.cursor="pointer",i.style.cursor="pointer",i.draggable=!0,t.addEventListener("click",y.seekMediaListener),n.addEventListener("click",y.seekMediaListener),i.addEventListener("dragend",y.seekMediaListener)):(t.style.backgroundImage="url('./assets/imagefiles/timeline_bg_buffer.png')",t.style.cursor="default",n.style.cursor="default",i.style.cursor="default",i.draggable=!1,t.removeEventListener("click",y.seekMediaListener),n.removeEventListener("click",y.seekMediaListener),i.removeEventListener("dragend",y.seekMediaListener))},p.prototype.requestFullScreen=function(){var e=document.getElementById("video_element"),t=e.requestFullScreen||e.webkitRequestFullScreen;t&&(t.call(e),console.log("Requested fullscreen"))},p.prototype.cancelFullScreen=function(){var e=document.cancelFullScreen||document.webkitCancelFullScreen;e&&e.call(document)},p.prototype.fullscreenChangeHandler=function(){y.fullscreen=!y.fullscreen},p.prototype.showFullscreenButton=function(){var e=document.getElementById("fullscreen_expand"),t=document.getElementById("fullscreen_collapse");y.fullscreen?(e&&e.style&&e.style.display&&(e.style.display="none"),t&&t.style&&t.style.display&&(t.style.display="block")):(e&&e.style&&e.style.display&&(e.style.display="block"),t&&t.style&&t.style.display&&(t.style.display="none"))},p.prototype.hideFullscreenButton=function(){var e=document.getElementById("fullscreen_expand"),t=document.getElementById("fullscreen_collapse");e&&e.style&&e.style.display&&(e.style.display="none"),t&&t.style&&t.style.display&&(t.style.display="none")},p.prototype.showMediaControl=function(){var e=document.getElementById("media_control");e&&e.style&&e.opacity&&(e.style.opacity=.7)},p.prototype.hideMediaControl=function(){if("undefined"!=typeof cast){var e=cast.framework.CastContext.getInstance();e&&e.getCurrentSession()?document.getElementById("media_control").style.opacity=.7:document.getElementById("media_control").style.opacity=0}},p.prototype.showVolumeSlider=function(){y.playerHandler.isMuted()||(document.getElementById("audio_bg").style.opacity=1,document.getElementById("audio_bg_track").style.opacity=1,document.getElementById("audio_bg_level").style.opacity=1,document.getElementById("audio_indicator").style.opacity=1)},p.prototype.hideVolumeSlider=function(){document.getElementById("audio_bg").style.opacity=0,document.getElementById("audio_bg_track").style.opacity=0,document.getElementById("audio_bg_level").style.opacity=0,document.getElementById("audio_indicator").style.opacity=0},p.prototype.resetVolumeSlider=function(){var e=.5*document.getElementById("audio_bg_track").clientHeight;document.getElementById("audio_bg_level").style.height=e+"px",document.getElementById("audio_on").style.display="block",document.getElementById("audio_off").style.display="none"},p.prototype.initializeUI=function(){document.getElementById("media_title").innerHTML=y.mediaContents[0].title,document.getElementById("media_subtitle").innerHTML=y.mediaContents[y.currentMediaIndex].subtitle,document.getElementById("media_desc").innerHTML=y.mediaContents[y.currentMediaIndex].description,document.getElementById("progress_bg").addEventListener("click",y.seekMedia.bind(y)),document.getElementById("progress").addEventListener("click",y.seekMedia.bind(y)),document.getElementById("progress_indicator").addEventListener("dragend",y.seekMedia.bind(y)),document.getElementById("audio_on").addEventListener("click",y.playerHandler.mute.bind(y.playerHandler)),document.getElementById("audio_off").addEventListener("click",y.playerHandler.unMute.bind(y.playerHandler)),document.getElementById("audio_bg").addEventListener("mouseover",y.showVolumeSlider.bind(y)),document.getElementById("audio_on").addEventListener("mouseover",y.showVolumeSlider.bind(y)),document.getElementById("audio_bg_level").addEventListener("mouseover",y.showVolumeSlider.bind(y)),document.getElementById("audio_bg_track").addEventListener("mouseover",y.showVolumeSlider.bind(y)),document.getElementById("audio_bg_level").addEventListener("click",y.setVolume.bind(y)),document.getElementById("audio_bg_track").addEventListener("click",y.setVolume.bind(y)),document.getElementById("audio_bg").addEventListener("mouseout",y.hideVolumeSlider.bind(y)),document.getElementById("audio_on").addEventListener("mouseout",y.hideVolumeSlider.bind(y)),document.getElementById("main_video").addEventListener("mouseover",y.showMediaControl.bind(y)),document.getElementById("main_video").addEventListener("mouseout",y.hideMediaControl.bind(y)),document.getElementById("media_control").addEventListener("mouseover",y.showMediaControl.bind(y)),document.getElementById("media_control").addEventListener("mouseout",y.hideMediaControl.bind(y)),document.getElementById("fullscreen_expand").addEventListener("click",y.requestFullScreen.bind(y)),document.getElementById("fullscreen_collapse").addEventListener("click",y.cancelFullScreen.bind(y)),document.addEventListener("fullscreenchange",y.fullscreenChangeHandler.bind(y),!1),document.addEventListener("webkitfullscreenchange",y.fullscreenChangeHandler.bind(y),!1),document.getElementById("play").addEventListener("click",y.playerHandler.play.bind(y.playerHandler)),document.getElementById("pause").addEventListener("click",y.playerHandler.pause.bind(y.playerHandler)),document.getElementById("progress_indicator").draggable=!0},p.prototype.addVideoThumbs=function(){if(void 0!==y.mediaJSON&&y.mediaJSON.categories&&y.mediaJSON.categories.length>0){y.mediaContents=y.mediaJSON.categories[0].videos;for(var e=document.getElementById("carousel"),t=null,i=null,n=0;n<y.mediaContents.length;n++)i="thumb"+n+"Div",(t=document.createElement("div")).setAttribute("id",i),t.setAttribute("class","thumb"),t.innerHTML='<img src="'+y.mediaContents[n].thumb+'" class="thumbnail">',t.addEventListener("click",y.selectMedia.bind(this,n)),e.appendChild(t)}},p.prototype.addMediaContents=function(){return void 0!==y.mediaJSON&&y.mediaJSON.categories&&y.mediaJSON.categories.length>0?(y.mediaContents=y.mediaJSON.categories[0].videos,y.mediaContents):null},p.getErrorMessage=function(e){switch(e.code){case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"The API is not initialized."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.CANCEL:return"The operation was canceled by the user"+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.CHANNEL_ERROR:return"A channel to the receiver is not available."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.EXTENSION_MISSING:return"The Cast extension is not available."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.INVALID_PARAMETER:return"The parameters to the operation were not valid."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"No receiver was compatible with the session request."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.SESSION_ERROR:return"A session could not be created, or a session was invalid."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.TIMEOUT:return"The operation timed out."+(e.description?" :"+e.description:"");default:return e}};var y=new p;window.__onGCastApiAvailable=function(e){e&&y.initializeCastPlayer()},window.CastPlayer=y,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=thinkam.net-ng-cast.umd.min.js.map