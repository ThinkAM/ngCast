{"version":3,"file":"thinkam.net-ng-cast.js","sources":["../../ng-cast.component.ts","../../shared/ng-cast.service.ts","../../ng.cast.module.ts","../../thinkam.net-ng-cast.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\n\nimport { NgCastService } from './shared/ng-cast.service';\n\n@Component({\n  selector: 'ng-cast',\n  template: '<google-cast-launcher id=\"castbutton\"></google-cast-launcher>',\n  styleUrls: [\n    './ng-cast.component.scss'\n  ]\n})\nexport class NgCastComponent implements OnInit {\n  castingStatus: any;\n  constructor(\n    private ngCastService: NgCastService\n  ) { }\n\n  ngOnInit() {\n\n  }\n\n  openSession() {\n    this.ngCastService.discoverDevices();\n  }\n\n  closeSession() {\n    this.ngCastService.stop();\n  }\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Subject } from 'rxjs';\n\ndeclare var mediaJSON: any;\n\n@Injectable()\nexport class NgCastService {\n  private cast: any;\n  private chrome: any;\n  private session: any;\n  private currentMedia: any;\n  private window: any = window;\n\n  public status = {\n    casting: false\n  };\n\n  constructor() {\n    \n  }\n\n  initializeCastApi() {\n    this.cast = this.window['chrome'].cast;\n    let sessionRequest = new this.cast.SessionRequest(this.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID);\n    let apiConfig = new this.cast.ApiConfig(sessionRequest,\n      () => { },\n      (status: any) => { if (status === this.cast.ReceiverAvailability.AVAILABLE) { } }\n    );\n    let x = this.cast.initialize(apiConfig, this.onInitSuccess, this.onError);\n  };\n\n  onInitSuccess = function () {\n    console.log('GCast initialization success');\n  };\n\n  onError = function (err: any) {\n    console.log('GCast initialization failed', err);\n  };\n\n  discoverDevices = () => {\n    let self: any = this;\n    let subj = new Subject();\n    this.cast.requestSession((s: any) => {\n      self.session = s;\n      self.setCasting(true);\n      subj.next('CONNECTED');\n    }, function (err: any) {\n      self.setCasting(false);\n      if (err.code === 'cancel') {\n        self.session = undefined;\n        subj.next('CANCEL');\n      } else {\n        console.error('Error selecting a cast device', err);\n      }\n    });\n    return subj;\n  };\n\n  onMediaDiscovered = (categories: any[]) => {\n    let script = window['document'].createElement('script');\n    script.setAttribute('type', 'text/javascript');\n    script.setAttribute('src', 'https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1');\n    window['document'].body.appendChild(script);\n\n    let media = window['document'].createElement('script');\n    media.setAttribute('type', 'text/javascript');\n    media.setAttribute('src', '/assets/lib/media.js');\n    window['document'].body.appendChild(media);\n\n    let castVideo = window['document'].createElement('script');\n    media.setAttribute('type', 'text/javascript');\n    media.setAttribute('src', '/assets/lib/castVideo.js');\n    window['document'].body.appendChild(castVideo);\n\n    let ads = window['document'].createElement('script');\n    media.setAttribute('type', 'text/javascript');\n    media.setAttribute('src', '/assets/lib/ads.js');\n    window['document'].body.appendChild(ads);\n\n    mediaJSON.categories = categories;\n  };\n\n  play = () => {\n    this.currentMedia.play(null);\n  };\n\n  pause = () => {\n    this.currentMedia.pause(null);\n  };\n\n  stop = () => {\n    this.currentMedia.stop(null);\n  };\n\n  onMediaError = (err: any) => {\n    console.error('Error launching media', err);\n  };\n\n  setCasting(value: any) {\n    this.status.casting = value;\n  }\n\n  getStatus() {\n    return this.status\n  }\n}\n","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgCastComponent } from './ng-cast.component';\nimport { NgCastService } from './shared/ng-cast.service';\n\n@NgModule({\n  schemas: [ CUSTOM_ELEMENTS_SCHEMA ],\n  imports: [\n    CommonModule\n  ],\n  exports: [NgCastComponent],\n  providers: [NgCastService],\n  declarations: [NgCastComponent]\n})\nexport class NgCastModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {NgCastComponent as Éµa} from './ng-cast.component';"],"names":[],"mappings":"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"}